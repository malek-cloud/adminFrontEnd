{"ast":null,"code":"import _objectSpread from\"C:/Users/malek/Desktop/web/react-try/descovery/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/malek/Desktop/web/react-try/descovery/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/malek/Desktop/web/react-try/descovery/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/malek/Desktop/web/react-try/descovery/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from\"react\";import\"./GrowItem.scss\";import{Modal}from\"react-bootstrap\";import FileBase from'react-file-base64';import FileUpload from\"../elements/FileUpload\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function PublierArticle(props){var titleInputRef=useRef();var contentInputRef=useRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),fileUpload=_useState2[0],setFileUpload=_useState2[1];var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var entredTitle,entredContent,formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();entredTitle=titleInputRef.current.value;entredContent=contentInputRef.current.value;_context.prev=3;formData=new FormData();formData.append(\"title\",entredTitle);formData.append(\"image\",fileUpload);formData.append(\"content\",entredContent);console.log(fileUpload);_context.next=11;return fetch('http://localhost:5000/createPost',{method:\"POST\",body:formData});case 11:_context.next=15;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](3);case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,13]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();// const articleData = {\n//   title :  entredTitle,\n//file : fileUpload,\n// content : entredContent\n//};\n//props.onAddArticle(articleData) ;\n//body: JSON.stringify(articleData),\n// headers: {\n//   \"Content-Type\": \"application/json\",\n// },\nvar handleSendFile=function handleSendFile(file){console.log(file);setFileUpload(file);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Modal,_objectSpread(_objectSpread({},props),{},{size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,show:props.show,onHide:props.onHide,backdrop:\"static\",keyboard:false,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex my-2 justify-content-center text-success\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Publier un Article\"})})})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"htmlForm-floating \",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Titre\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"htmlForm-floating \",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",required:true,className:\"form-control\",style:{height:\"30px\"},ref:titleInputRef})}),/*#__PURE__*/_jsx(\"div\",{children:\"Upload an image/video/audio/pdf (optional) !\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group mb-3\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(FileBase,{type:\"file\",multiple:false,onDone:function onDone(_ref2){var base64=_ref2.base64;return setFileUpload({base64:base64});}})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"htmlForm-floating mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",children:\"Content\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"content\",ref:contentInputRef,required:true,className:\"form-control\"})]})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center \",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary grow mx-2\",onClick:props.onHide,children:\"Annuler\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center \",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success grow mx-2\",type:\"submit\",onClick:props.onHide,children:\"Publier\"})})]})]})]}))});}export default PublierArticle;","map":{"version":3,"sources":["C:/Users/malek/Desktop/web/react-try/descovery/src/components/PublierArticle.js"],"names":["React","useRef","useState","Modal","FileBase","FileUpload","PublierArticle","props","titleInputRef","contentInputRef","fileUpload","setFileUpload","submitHandler","event","preventDefault","entredTitle","current","value","entredContent","formData","FormData","append","console","log","fetch","method","body","handleSendFile","file","show","onHide","textAlign","height","base64"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\r\nimport \"./GrowItem.scss\";\r\nimport { Modal } from \"react-bootstrap\";\r\nimport FileBase from 'react-file-base64';\r\nimport FileUpload from \"../elements/FileUpload\";\r\nfunction PublierArticle(props) {\r\n  const titleInputRef = useRef();\r\n  const contentInputRef = useRef();\r\n  const [fileUpload, setFileUpload] = useState();\r\n\r\n  const submitHandler = async (event) => {\r\n    event.preventDefault();\r\n    const entredTitle = titleInputRef.current.value;\r\n    const entredContent = contentInputRef.current.value;\r\n    \r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"title\", entredTitle);\r\n      formData.append(\"image\", fileUpload);\r\n      formData.append(\"content\", entredContent);\r\n      console.log(fileUpload);\r\n      await fetch('http://localhost:5000/createPost', {\r\n        method : \"POST\", \r\n        body : formData ,\r\n        \r\n      });\r\n    } catch (err) {}\r\n  };\r\n\r\n  // const articleData = {\r\n  //   title :  entredTitle,\r\n  //file : fileUpload,\r\n  // content : entredContent\r\n\r\n  //};\r\n  //props.onAddArticle(articleData) ;\r\n\r\n  //body: JSON.stringify(articleData),\r\n  // headers: {\r\n  //   \"Content-Type\": \"application/json\",\r\n  // },\r\n\r\n  const handleSendFile = (file) => {\r\n    console.log(file);\r\n    setFileUpload(file);\r\n  };\r\n  return (\r\n    <>\r\n      <Modal\r\n        {...props}\r\n        size=\"lg\"\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered\r\n        show={props.show}\r\n        onHide={props.onHide}\r\n        backdrop=\"static\"\r\n        keyboard={false}\r\n      >\r\n        <Modal.Header closeButton style={{ textAlign: \"center\" }}>\r\n          <Modal.Title id=\"contained-modal-title-vcenter\">\r\n            <div className=\"d-flex my-2 justify-content-center text-success\">\r\n              <h4>Publier un Article</h4>\r\n            </div>\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <form onSubmit={submitHandler}>\r\n          <Modal.Body>\r\n            <div className=\"htmlForm-floating \">\r\n              <label htmlFor=\"title\">Titre</label>\r\n            </div>\r\n            <div className=\"htmlForm-floating \">\r\n              <input\r\n                type=\"text\"\r\n                id=\"title\"\r\n                required\r\n                className=\"form-control\"\r\n                style={{ height: \"30px\" }}\r\n                ref={titleInputRef}\r\n              />\r\n            </div>\r\n\r\n            <div>Upload an image/video/audio/pdf (optional) !</div>\r\n            <div className=\"input-group mb-3\">\r\n\r\n            <div><FileBase type=\"file\" multiple={false} onDone={({ base64 }) => setFileUpload({ base64 })} /></div>\r\n\r\n           </div>\r\n\r\n           \r\n\r\n            <div className=\"htmlForm-floating mb-3\">\r\n              <label htmlFor=\"content\">Content</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"content\"\r\n                ref={contentInputRef}\r\n                required\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <div className=\"d-flex justify-content-center \">\r\n              <button\r\n                className=\"btn btn-secondary grow mx-2\"\r\n                onClick={props.onHide}\r\n              >\r\n                Annuler\r\n              </button>\r\n            </div>\r\n            <div className=\"d-flex justify-content-center \">\r\n              <button\r\n                className=\"btn btn-success grow mx-2\"\r\n                type=\"submit\"\r\n                onClick={props.onHide}\r\n              >\r\n                Publier\r\n              </button>\r\n            </div>\r\n          </Modal.Footer>\r\n        </form>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PublierArticle;\r\n"]},"metadata":{},"sourceType":"module"}