{"ast":null,"code":"import _slicedToArray from\"C:/Users/malek/Desktop/web/react-try/descovery/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useContext}from\"react\";import Article from\"./Article\";import AuthContext from'../context/authContext';//import currentUser from '../hooks/currentEmployee'\nimport{jsx as _jsx}from\"react/jsx-runtime\";function Articles(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var auth=useContext(AuthContext);var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),loadedArticles=_useState4[0],setLoadingArticles=_useState4[1];//const user = currentUser() ;\nuseEffect(function(){setIsLoading(true);try{fetch(process.env.REACT_APP_BACKEND_URL+'posts').then(function(response){return response.json();}).then(function(data){console.log(\"data\",data.posts);setLoadingArticles(data.posts.reverse());setIsLoading(false);console.log(loadedArticles);console.log(\"currentUser houwa : \"+auth.EmployeeId);});}catch(err){};},[]);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"div\",{class:\"spinner-border text-success\",style:{align:\"center\",marginLeft:\"40%\",fontSize:\"30px\",height:\"60px\",width:\"60px\",marginTop:\"18%\"},role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{class:\"visually-hidden\",children:\"Loading...\"})})})});}return loadedArticles.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"No articles yet\"}):/*#__PURE__*/_jsx(\"div\",{children:loadedArticles.map(function(article){return/*#__PURE__*/_jsx(Article,{nom:auth.EmployeeId.nom,prenom:auth.EmployeeId.prenom,title:article.title,content:article.content// image={article.image}\n},article._id);})});}export default Articles;","map":{"version":3,"sources":["C:/Users/malek/Desktop/web/react-try/descovery/src/components/Articles.js"],"names":["useState","useEffect","useContext","Article","AuthContext","Articles","props","isLoading","setIsLoading","auth","loadedArticles","setLoadingArticles","fetch","process","env","REACT_APP_BACKEND_URL","then","response","json","data","console","log","posts","reverse","EmployeeId","err","align","marginLeft","fontSize","height","width","marginTop","length","map","article","nom","prenom","title","content","_id"],"mappings":"iIAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA6BC,UAA7B,KAA+C,OAA/C,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAQC,CAAAA,WAAR,KAA0B,wBAA1B,CACA;2CACA,QAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,CACvB,cAAkCN,QAAQ,CAAC,IAAD,CAA1C,wCAAOO,SAAP,eAAkBC,YAAlB,eACA,GAAMC,CAAAA,IAAI,CAAGP,UAAU,CAACE,WAAD,CAAvB,CACA,eAA6CJ,QAAQ,CAAC,EAAD,CAArD,yCAAOU,cAAP,eAAuBC,kBAAvB,eACA;AACAV,SAAS,CAAC,UAAM,CACdO,YAAY,CAAC,IAAD,CAAZ,CACA,GAAI,CACFI,KAAK,CAACC,OAAO,CAACC,GAAR,CAAYC,qBAAZ,CAAoC,OAArC,CAAL,CACGC,IADH,CACQ,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EADR,EAEGF,IAFH,CAEQ,SAACG,IAAD,CAAU,CACdC,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAoBF,IAAI,CAACG,KAAzB,EACAX,kBAAkB,CAACQ,IAAI,CAACG,KAAL,CAAWC,OAAX,EAAD,CAAlB,CACAf,YAAY,CAAC,KAAD,CAAZ,CACAY,OAAO,CAACC,GAAR,CAAYX,cAAZ,EACAU,OAAO,CAACC,GAAR,CAAY,uBAAyBZ,IAAI,CAACe,UAA1C,EACD,CARH,EASD,CAAC,MAAOC,GAAP,CAAY,CAAE,CAAC,CAGpB,CAfU,CAeR,EAfQ,CAAT,CAkBA,GAAIlB,SAAJ,CAAe,CACb,mBACE,kCACE,gCAAG,YACO,KAAK,CAAC,6BADb,CAEO,KAAK,CAAE,CAAEmB,KAAK,CAAE,QAAT,CAAmBC,UAAU,CAAG,KAAhC,CAAwCC,QAAQ,CAAC,MAAjD,CAA0DC,MAAM,CAAG,MAAnE,CAA2EC,KAAK,CAAC,MAAjF,CAAyFC,SAAS,CAAG,KAArG,CAFd,CAGO,IAAI,CAAC,QAHZ,uBAKO,aAAM,KAAK,CAAC,iBAAZ,wBALP,EAAH,EADF,EADF,CAWD,CACD,MAAOrB,CAAAA,cAAc,CAACsB,MAAf,GAA0B,CAA1B,cACL,wCADK,cAGL,qBACGtB,cAAc,CAACuB,GAAf,CAAmB,SAACC,OAAD,qBAClB,KAAC,OAAD,EAEE,GAAG,CAAEzB,IAAI,CAACe,UAAL,CAAgBW,GAFvB,CAGE,MAAM,CAAE1B,IAAI,CAACe,UAAL,CAAgBY,MAH1B,CAIE,KAAK,CAAEF,OAAO,CAACG,KAJjB,CAKE,OAAO,CAAEH,OAAO,CAACI,OACjB;AANF,EACOJ,OAAO,CAACK,GADf,CADkB,EAAnB,CADH,EAHF,CAgBD,CACD,cAAelC,CAAAA,QAAf","sourcesContent":["import { useState, useEffect,useContext } from \"react\";\r\nimport Article from \"./Article\";\r\nimport  AuthContext  from '../context/authContext';\r\n//import currentUser from '../hooks/currentEmployee'\r\nfunction Articles(props) {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const auth = useContext(AuthContext);\r\n  const [loadedArticles, setLoadingArticles] = useState([]);\r\n  //const user = currentUser() ;\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    try {\r\n      fetch(process.env.REACT_APP_BACKEND_URL + 'posts')\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(\"data\", data.posts);\r\n          setLoadingArticles(data.posts.reverse());\r\n          setIsLoading(false);\r\n          console.log(loadedArticles);\r\n          console.log(\"currentUser houwa : \" + auth.EmployeeId);\r\n        });\r\n    } catch (err) {} ;\r\n   \r\n  \r\n}, []);\r\n\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div>\r\n        <p><div\r\n                  class=\"spinner-border text-success\"\r\n                  style={{ align: \"center\", marginLeft : \"40%\" , fontSize:\"30px\" , height : \"60px\", width:\"60px\", marginTop : \"18%\"}}\r\n                  role=\"status\"\r\n                >\r\n                  <span class=\"visually-hidden\">Loading...</span>\r\n                </div></p>\r\n      </div>\r\n    );\r\n  }\r\n  return loadedArticles.length === 0 ? (\r\n    <div>No articles yet</div>\r\n  ) : (\r\n    <div>\r\n      {loadedArticles.map((article) => (\r\n        <Article\r\n          key={article._id}\r\n          nom={auth.EmployeeId.nom}\r\n          prenom={auth.EmployeeId.prenom}\r\n          title={article.title}\r\n          content={article.content}\r\n          // image={article.image}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\nexport default Articles;\r\n"]},"metadata":{},"sourceType":"module"}