{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/malek/Desktop/web/react-try/descovery/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/malek/Desktop/web/react-try/descovery/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/malek/Desktop/web/react-try/descovery/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import AuthContext from\"../context/authContext\";import{useRef,useState,useContext}from\"react\";import\"./LogInStyle.css\";import LoadingSpinner from\"./LoadingSpinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LogIn=function LogIn(){var emailRef=useRef();var passwdRef=useRef();var auth=useContext(AuthContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loader=_useState2[0],setLoader=_useState2[1];var authSubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var logInData,responseData,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();logInData={email:emailRef.current.value,password:passwdRef.current.value};_context.prev=2;setLoader(true);_context.next=6;return fetch(process.env.REACT_APP_BACKEND_URL+\"employee/login\",{method:\"POST\",body:JSON.stringify(logInData),headers:{\"Content-Type\":\"application/json\"}});case 6:responseData=_context.sent;_context.next=9;return responseData.json();case 9:data=_context.sent;if(responseData.status==200){console.log(\"het el loader \"+loader);auth.token=data.token;auth.login(data.Employee,data.token);auth.EmployeeId=data.Employee;setLoader(false);console.log(data);}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);console.log(\"mamchetech el check mta el login\"+_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[2,13]]);}));return function authSubmitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[loader&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"table\",{className:\"nav\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"th\",{children:[\" \",/*#__PURE__*/_jsx(\"img\",{alt:\"\",className:\"logo\",src:\"images/oyemkemlavert.png\"})]}),/*#__PURE__*/_jsx(\"th\",{className:\"accueil\",children:\"Accueil\"})]})})}),/*#__PURE__*/_jsxs(\"section\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"sign\",children:\"Se Connecter\"}),/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"img\",{alt:\"\",className:\"image\",src:\"images/oyemvertblanc.jpg\"})}),/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsx(\"form\",{className:\"form1\"}),/*#__PURE__*/_jsx(\"input\",{className:\"email \",name:\"email\",type:\"email\",align:\"center\",placeholder:\"Email\",ref:emailRef}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"pass\",type:\"password\",align:\"center\",placeholder:\"Mot De Passe\",ref:passwdRef})}),/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"submit\",onClick:authSubmitHandler,align:\"center\",children:\"Se Connecter\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"forgot \",align:\"center \",children:/*#__PURE__*/_jsx(\"a\",{alt:\"\",href:\"Reset password \",children:\"Mot De Passe Oubli\\xE9?\"})})})]})]})})]})]});};export default LogIn;","map":{"version":3,"sources":["C:/Users/malek/Desktop/web/react-try/descovery/src/coach/LogInEmployee.js"],"names":["AuthContext","useRef","useState","useContext","LoadingSpinner","LogIn","emailRef","passwdRef","auth","loader","setLoader","authSubmitHandler","event","preventDefault","logInData","email","current","value","password","fetch","process","env","REACT_APP_BACKEND_URL","method","body","JSON","stringify","headers","responseData","json","data","status","console","log","token","login","Employee","EmployeeId"],"mappings":"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","sourcesContent":["import AuthContext from \"../context/authContext\";\r\nimport { useRef, useState, useContext } from \"react\";\r\nimport \"./LogInStyle.css\";\r\nimport LoadingSpinner from \"./LoadingSpinner\";\r\nconst LogIn = () => {\r\n  const emailRef = useRef();\r\n  const passwdRef = useRef();\r\n  const auth = useContext(AuthContext);\r\n  const [loader, setLoader] = useState(false);\r\n\r\n  const authSubmitHandler = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const logInData = {\r\n      email: emailRef.current.value,\r\n      password: passwdRef.current.value,\r\n    };\r\n\r\n    try {\r\n      setLoader(true);\r\n      const responseData = await fetch(\r\n        process.env.REACT_APP_BACKEND_URL + \"employee/login\",\r\n        {\r\n          method: \"POST\",\r\n          body: JSON.stringify(logInData),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n      const data = await responseData.json();\r\n      if(responseData.status == 200){\r\n        console.log(\"het el loader \" + loader);\r\n      auth.token = data.token;\r\n      auth.login(data.Employee, data.token);\r\n      auth.EmployeeId = data.Employee;\r\n      setLoader(false);\r\n      console.log(data);\r\n      }\r\n    } catch (err) {\r\n      console.log(\"mamchetech el check mta el login\" + err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {loader && <LoadingSpinner asOverlay />}\r\n      <header>\r\n        \r\n        <table className=\"nav\">\r\n          <tr>\r\n            <th>\r\n              {\" \"}\r\n              <img alt=\"\" className=\"logo\" src=\"images/oyemkemlavert.png\" />\r\n            </th>\r\n            <th className=\"accueil\">Accueil</th>\r\n          </tr>\r\n        </table>\r\n      </header>\r\n\r\n      <section className=\"main\">\r\n        <p className=\"sign\">Se Connecter</p>\r\n\r\n        <table>\r\n          <tr>\r\n            <th>\r\n              <img alt=\"\" className=\"image\" src=\"images/oyemvertblanc.jpg\" />\r\n            </th>\r\n            <th>\r\n              <form className=\"form1\" />\r\n              <input\r\n                className=\"email \"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                align=\"center\"\r\n                placeholder=\"Email\"\r\n                ref={emailRef}\r\n              />\r\n\r\n              <div>\r\n                <input\r\n                  className=\"pass\"\r\n                  type=\"password\"\r\n                  align=\"center\"\r\n                  placeholder=\"Mot De Passe\"\r\n                  ref={passwdRef}\r\n                />\r\n              </div>\r\n\r\n              <a\r\n                href=\"/\"\r\n                className=\"submit\"\r\n                onClick={authSubmitHandler}\r\n                align=\"center\"\r\n              >\r\n                Se Connecter\r\n              </a>\r\n\r\n              <br />\r\n              <br />\r\n\r\n              <div>\r\n                <p className=\"forgot \" align=\"center \">\r\n                  <a alt=\"\" href=\"Reset password \">\r\n                    Mot De Passe Oubli√©?\r\n                  </a>\r\n                </p>\r\n              </div>\r\n            </th>\r\n          </tr>\r\n        </table>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LogIn;\r\n"]},"metadata":{},"sourceType":"module"}