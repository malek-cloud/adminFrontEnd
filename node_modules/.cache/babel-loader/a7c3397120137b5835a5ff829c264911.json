{"ast":null,"code":"import _objectSpread from\"C:/Users/malek/Desktop/web/react-try/descovery/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/malek/Desktop/web/react-try/descovery/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/malek/Desktop/web/react-try/descovery/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useRef,useState,useContext}from\"react\";import AuthContext from'../context/authContext';import\"./GrowItem.scss\";import{Modal}from\"react-bootstrap\";//import FileBase from \"react-file-base64\";\n//import FileUpload from \"../elements/FileUpload\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function PublierArticle(props){//const [baseImage, setBaseImage] = useState(\"\");\nvar auth=useContext(AuthContext);/* const uploadImage = async (e) => {\r\n    const file = e.target.files[0];\r\n   // const base64 = await convertBase64(file);\r\n    setBaseImage(base64);\r\n  };\r\n\r\n  const convertBase64 = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      const fileReader = new FileReader();\r\n      fileReader.readAsDataURL(file);\r\n\r\n      fileReader.onload = () => {\r\n        resolve(fileReader.result);\r\n      };\r\n\r\n      fileReader.onerror = (error) => {\r\n        reject(error);\r\n      };\r\n    });\r\n  };*/var titleInputRef=useRef();var contentInputRef=useRef();//const [fileUpload, setFileUpload] = useState(\"\");\nvar submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var postData,response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(auth.isLoggedIn){_context.next=4;break;}console.log(\"pas connecte\");_context.next=19;break;case 4:_context.prev=4;postData={title:titleInputRef.current.value,employeeId:auth.EmployeeId,content:contentInputRef.current.value};props.onHide();_context.next=9;return fetch(process.env.REACT_APP_BACKEND_URL+'createPost',{method:\"POST\",body:JSON.stringify(postData),headers:{\"Content-Type\":\"application/json\"}});case 9:response=_context.sent;_context.next=12;return response.json();case 12:data=_context.sent;console.log(data);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](4);console.log(\"erreur mateb3athch el post raw\");case 19:case\"end\":return _context.stop();}}},_callee,null,[[4,16]]);}));return function submitHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Modal,_objectSpread(_objectSpread({},props),{},{size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,show:props.show,onHide:props.onHide,backdrop:\"static\",keyboard:false,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex my-2 justify-content-center text-success\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Publier un Article\"})})})}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"htmlForm-floating \",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Titre\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"htmlForm-floating \",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",required:true,className:\"form-control\",style:{height:\"30px\"},ref:titleInputRef})}),/*#__PURE__*/_jsx(\"div\",{children:\"Upload an image/video/audio/pdf (optional) !\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group mb-3\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\"/* onChange={(e) => {\r\n                      uploadImage(e);\r\n                    }}*/}),/*#__PURE__*/_jsx(\"br\",{})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"htmlForm-floating mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",children:\"Content\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"content\",ref:contentInputRef,required:true,className:\"form-control\"})]})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center \",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary grow mx-2\",onClick:props.onHide,children:\"Annuler\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center \",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success grow mx-2\",onClick:submitHandler,children:\"Publier\"})})]})]})]}))});}export default PublierArticle;","map":{"version":3,"sources":["C:/Users/malek/Desktop/web/react-try/descovery/src/components/PublierArticle.js"],"names":["React","useRef","useState","useContext","AuthContext","Modal","PublierArticle","props","auth","titleInputRef","contentInputRef","submitHandler","isLoggedIn","console","log","postData","title","current","value","employeeId","EmployeeId","content","onHide","fetch","process","env","REACT_APP_BACKEND_URL","method","body","JSON","stringify","headers","response","json","data","show","textAlign","height"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useContext } from \"react\";\r\nimport  AuthContext  from '../context/authContext';\r\nimport \"./GrowItem.scss\";\r\nimport { Modal } from \"react-bootstrap\";\r\n//import FileBase from \"react-file-base64\";\r\n//import FileUpload from \"../elements/FileUpload\";\r\nfunction PublierArticle(props) {\r\n  //const [baseImage, setBaseImage] = useState(\"\");\r\n  const auth = useContext(AuthContext);\r\n /* const uploadImage = async (e) => {\r\n    const file = e.target.files[0];\r\n   // const base64 = await convertBase64(file);\r\n    setBaseImage(base64);\r\n  };\r\n\r\n  const convertBase64 = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      const fileReader = new FileReader();\r\n      fileReader.readAsDataURL(file);\r\n\r\n      fileReader.onload = () => {\r\n        resolve(fileReader.result);\r\n      };\r\n\r\n      fileReader.onerror = (error) => {\r\n        reject(error);\r\n      };\r\n    });\r\n  };*/\r\n  const titleInputRef = useRef();\r\n  const contentInputRef = useRef();\r\n  //const [fileUpload, setFileUpload] = useState(\"\");\r\n\r\n  const submitHandler = async () => {\r\n    if(!auth.isLoggedIn){\r\n      console.log(\"pas connecte\");\r\n    }else{\r\n     // const entredImage = baseImage;\r\n\r\n      try {\r\n        const postData = {\r\n          title : titleInputRef.current.value,\r\n          employeeId : auth.EmployeeId,\r\n          content : contentInputRef.current.value\r\n        }\r\n\r\n        props.onHide();\r\n        const response = await fetch( process.env.REACT_APP_BACKEND_URL +'createPost', {\r\n          method: \"POST\",\r\n          body: JSON.stringify(postData),\r\n          headers: {\r\n               \"Content-Type\": \"application/json\",\r\n             },\r\n        });\r\n        const data = await response.json();\r\n        console.log(data);\r\n      } catch (err) {\r\n        console.log(\"erreur mateb3athch el post raw\");\r\n      }}\r\n  };\r\n\r\n  \r\n  return (\r\n    <>\r\n      <Modal\r\n        {...props}\r\n        size=\"lg\"\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered\r\n        show={props.show}\r\n        onHide={props.onHide}\r\n        backdrop=\"static\"\r\n        keyboard={false}\r\n      >\r\n        <Modal.Header closeButton style={{ textAlign: \"center\" }}>\r\n          <Modal.Title id=\"contained-modal-title-vcenter\">\r\n            <div className=\"d-flex my-2 justify-content-center text-success\">\r\n              <h4>Publier un Article</h4>\r\n            </div>\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <form /*onSubmit={submitHandler} enctype=\"multipart/form-data\"*/ >\r\n          <Modal.Body>\r\n            <div className=\"htmlForm-floating \">\r\n              <label htmlFor=\"title\">Titre</label>\r\n            </div>\r\n            <div className=\"htmlForm-floating \">\r\n              <input\r\n                type=\"text\"\r\n                id=\"title\"\r\n                required\r\n                className=\"form-control\"\r\n                style={{ height: \"30px\" }}\r\n                ref={titleInputRef}\r\n              />\r\n            </div>\r\n\r\n            <div>Upload an image/video/audio/pdf (optional) !</div>\r\n            <div className=\"input-group mb-3\">\r\n              <div>\r\n                <div>\r\n                  <input\r\n                    type=\"file\"\r\n                   /* onChange={(e) => {\r\n                      uploadImage(e);\r\n                    }}*/\r\n                  />\r\n                  <br></br>\r\n                 { /*<img alt=\"\" src={baseImage} height=\"200px\" />*/}\r\n                </div>\r\n\r\n                {/*<FileBase\r\n                  type=\"file\"\r\n                  multiple={false}\r\n                  onCh\r\n                  onDone={\r\n                      ({ base64 }) => setFileUpload({ base64 })}\r\n                />*/}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"htmlForm-floating mb-3\">\r\n              <label htmlFor=\"content\">Content</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"content\"\r\n                ref={contentInputRef}\r\n                required\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <div className=\"d-flex justify-content-center \">\r\n              <button\r\n                className=\"btn btn-secondary grow mx-2\"\r\n                onClick={props.onHide}\r\n              >\r\n                Annuler\r\n              </button>\r\n            </div>\r\n            <div className=\"d-flex justify-content-center \">\r\n              <button\r\n                className=\"btn btn-success grow mx-2\"\r\n               \r\n                onClick={submitHandler}\r\n              >\r\n                Publier\r\n              </button>\r\n            </div>\r\n          </Modal.Footer>\r\n        </form>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PublierArticle;\r\n"]},"metadata":{},"sourceType":"module"}